import { getDatabase } from './src/database/database.js';

const db = getDatabase();

console.log('üîç Recherche de tous les mots non traduits...\n');

// D'abord, voyons combien de mots il reste √† corriger
const untranslatedWords = db.db.prepare(`
    SELECT word, translation 
    FROM words 
    WHERE translation LIKE '[%]'
    ORDER BY word
`).all();

console.log(`üìä Trouv√© ${untranslatedWords.length} mots √† corriger\n`);

// Affichons les 50 premiers pour voir quels types de mots il faut corriger
console.log('üî§ Premiers mots √† corriger:');
untranslatedWords.slice(0, 50).forEach((row, index) => {
    console.log(`${index + 1}. ${row.word} -> ${row.translation}`);
});

if (untranslatedWords.length > 50) {
    console.log(`... et ${untranslatedWords.length - 50} autres mots`);
}

// Cr√©ons un dictionnaire complet pour TOUS les mots courants
const massiveTranslationDict = {
    // Verbes d'action de base
    'abandon': 'abandonner',
    'ability': 'capacit√©',
    'able': 'capable',
    'abortion': 'avortement',
    'about': '√† propos',
    'above': 'au-dessus',
    'abroad': '√† l\'√©tranger',
    'absence': 'absence',
    'absolute': 'absolu',
    'absolutely': 'absolument',
    'absorb': 'absorber',
    'abuse': 'abus',
    'academic': 'acad√©mique',
    'accept': 'accepter',
    'access': 'acc√®s',
    'accident': 'accident',
    'accompany': 'accompagner',
    'accomplish': 'accomplir',
    'according': 'selon',
    'account': 'compte',
    'accurate': 'pr√©cis',
    'accuse': 'accuser',
    'achieve': 'atteindre',
    'achievement': 'r√©alisation',
    'acid': 'acide',
    'acknowledge': 'reconna√Ætre',
    'acquire': 'acqu√©rir',
    'across': '√† travers',
    'act': 'agir',
    'action': 'action',
    'active': 'actif',
    'activist': 'activiste',
    'activity': 'activit√©',
    'actor': 'acteur',
    'actress': 'actrice',
    'actual': 'r√©el',
    'actually': 'en fait',
    'ad': 'publicit√©',
    'adapt': 'adapter',
    'add': 'ajouter',
    'addition': 'addition',
    'additional': 'suppl√©mentaire',
    'address': 'adresse',
    'adequate': 'ad√©quat',
    'administration': 'administration',
    'administrative': 'administratif',
    'administrator': 'administrateur',
    'admire': 'admirer',
    'admission': 'admission',
    'admit': 'admettre',
    'adolescent': 'adolescent',
    'adopt': 'adopter',
    'adult': 'adulte',
    'advance': 'avancer',
    'advanced': 'avanc√©',
    'advantage': 'avantage',
    'adventure': 'aventure',
    'advertising': 'publicit√©',
    'advice': 'conseil',
    'adviser': 'conseiller',
    'advocate': 'd√©fenseur',
    'affair': 'affaire',
    'affect': 'affecter',
    'afford': 'se permettre',
    'afraid': 'effray√©',
    'african': 'africain',
    'after': 'apr√®s',
    'afternoon': 'apr√®s-midi',
    'afterwards': 'apr√®s',
    'again': 'encore',
    'against': 'contre',
    'age': '√¢ge',
    'aged': '√¢g√©',
    'agency': 'agence',
    'agenda': 'agenda',
    'agent': 'agent',
    'aggressive': 'agressif',
    'ago': 'il y a',
    'agree': '√™tre d\'accord',
    'agreement': 'accord',
    'agricultural': 'agricole',
    'agriculture': 'agriculture',
    'ahead': 'devant',
    'aid': 'aide',
    'aim': 'viser',
    'air': 'air',
    'aircraft': 'a√©ronef',
    'airline': 'compagnie a√©rienne',
    'airport': 'a√©roport',
    'alarm': 'alarme',
    'album': 'album',
    'alcohol': 'alcool',
    'alert': 'alerte',
    'alien': '√©tranger',
    'alive': 'vivant',
    'all': 'tout',
    'alliance': 'alliance',
    'allow': 'permettre',
    'almost': 'presque',
    'alone': 'seul',
    'along': 'le long',
    'alongside': 'aux c√¥t√©s',
    'already': 'd√©j√†',
    'also': 'aussi',
    'alter': 'modifier',
    'alternative': 'alternative',
    'although': 'bien que',
    'altogether': 'tout √† fait',
    'always': 'toujours',
    'amazing': 'incroyable',
    'ambition': 'ambition',
    'ambulance': 'ambulance',
    'american': 'am√©ricain',
    'among': 'parmi',
    'amount': 'montant',
    'analysis': 'analyse',
    'analyst': 'analyste',
    'analyze': 'analyser',
    'ancient': 'ancien',
    'anger': 'col√®re',
    'angle': 'angle',
    'angry': 'en col√®re',
    'animal': 'animal',
    'anniversary': 'anniversaire',
    'announce': 'annoncer',
    'annual': 'annuel',
    'another': 'autre',
    'answer': 'r√©ponse',
    'anticipate': 'anticiper',
    'anxiety': 'anxi√©t√©',
    'anxious': 'anxieux',
    'any': 'tout',
    'anybody': 'n\'importe qui',
    'anymore': 'plus',
    'anyone': 'n\'importe qui',
    'anything': 'n\'importe quoi',
    'anyway': 'de toute fa√ßon',
    'anywhere': 'n\'importe o√π',
    'apart': '√† part',
    'apartment': 'appartement',
    'apparent': 'apparent',
    'apparently': 'apparemment',
    'appeal': 'appel',
    'appear': 'appara√Ætre',
    'appearance': 'apparence',
    'apple': 'pomme',
    'application': 'application',
    'apply': 'appliquer',
    'appoint': 'nommer',
    'appointment': 'rendez-vous',
    'appreciate': 'appr√©cier',
    'approach': 'approche',
    'appropriate': 'appropri√©',
    'approval': 'approbation',
    'approve': 'approuver',
    'approximately': 'approximativement',
    'arab': 'arabe',
    'architect': 'architecte',
    'architecture': 'architecture',
    'area': 'zone',
    'argue': 'argumenter',
    'argument': 'argument',
    'arise': 'surgir',
    'arm': 'bras',
    'armed': 'arm√©',
    'army': 'arm√©e',
    'around': 'autour',
    'arrange': 'organiser',
    'arrangement': 'arrangement',
    'arrest': 'arrestation',
    'arrival': 'arriv√©e',
    'arrive': 'arriver',
    'art': 'art',
    'article': 'article',
    'artist': 'artiste',
    'artistic': 'artistique',
    'as': 'comme',
    'asian': 'asiatique',
    'aside': '√† c√¥t√©',
    'ask': 'demander',
    'asleep': 'endormi',
    'aspect': 'aspect',
    'assault': 'agression',
    'assert': 'affirmer',
    'assess': '√©valuer',
    'assessment': '√©valuation',
    'asset': 'actif',
    'assign': 'assigner',
    'assignment': 'affectation',
    'assist': 'aider',
    'assistance': 'assistance',
    'assistant': 'assistant',
    'associate': 'associer',
    'association': 'association',
    'assume': 'supposer',
    'assumption': 'supposition',
    'ensure': 'assurer',
    'at': '√†',
    'athlete': 'athl√®te',
    'athletic': 'athl√©tique',
    'atmosphere': 'atmosph√®re',
    'attach': 'attacher',
    'attack': 'attaque',
    'attempt': 'tentative',
    'attend': 'assister',
    'attention': 'attention',
    'attitude': 'attitude',
    'attorney': 'avocat',
    'attract': 'attirer',
    'attractive': 'attrayant',
    'attribute': 'attribut',
    'audience': 'public',
    'author': 'auteur',
    'authority': 'autorit√©',
    'auto': 'auto',
    'automatic': 'automatique',
    'automatically': 'automatiquement',
    'automobile': 'automobile',
    'available': 'disponible',
    'average': 'moyenne',
    'avoid': '√©viter',
    'award': 'prix',
    'aware': 'conscient',
    'awareness': 'conscience',
    'away': 'loin',
    'awful': 'affreux',

    // Mots commen√ßant par B
    'baby': 'b√©b√©',
    'back': 'dos',
    'background': 'arri√®re-plan',
    'backup': 'sauvegarde',
    'bad': 'mauvais',
    'badly': 'mal',
    'bag': 'sac',
    'balance': '√©quilibre',
    'ball': 'balle',
    'ban': 'interdire',
    'band': 'groupe',
    'bank': 'banque',
    'bar': 'bar',
    'barely': '√† peine',
    'bargain': 'affaire',
    'barrel': 'baril',
    'barrier': 'barri√®re',
    'base': 'base',
    'baseball': 'baseball',
    'basic': 'basique',
    'basically': 'essentiellement',
    'basis': 'base',
    'basketball': 'basketball',
    'bathroom': 'salle de bain',
    'battery': 'batterie',
    'battle': 'bataille',
    'be': '√™tre',
    'beach': 'plage',
    'bean': 'haricot',
    'bear': 'ours',
    'beat': 'battre',
    'beautiful': 'beau',
    'beauty': 'beaut√©',
    'because': 'parce que',
    'become': 'devenir',
    'bed': 'lit',
    'bedroom': 'chambre',
    'beef': 'b≈ìuf',
    'beer': 'bi√®re',
    'before': 'avant',
    'begin': 'commencer',
    'beginning': 'd√©but',
    'behalf': 'nom',
    'behave': 'se comporter',
    'behavior': 'comportement',
    'behind': 'derri√®re',
    'being': '√™tre',
    'belief': 'croyance',
    'believe': 'croire',
    'bell': 'cloche',
    'belong': 'appartenir',
    'below': 'en dessous',
    'belt': 'ceinture',
    'bench': 'banc',
    'bend': 'plier',
    'beneath': 'sous',
    'benefit': 'b√©n√©fice',
    'beside': '√† c√¥t√©',
    'best': 'meilleur',
    'bet': 'parier',
    'better': 'mieux',
    'between': 'entre',
    'beyond': 'au-del√†',
    'bicycle': 'v√©lo',
    'bid': 'offre',
    'big': 'grand',
    'bike': 'v√©lo',
    'bill': 'facture',
    'billion': 'milliard',
    'bind': 'lier',
    'biological': 'biologique',
    'bird': 'oiseau',
    'birth': 'naissance',
    'birthday': 'anniversaire',
    'bit': 'peu',
    'bite': 'mordre',
    'black': 'noir',
    'blade': 'lame',
    'blame': 'bl√¢mer',
    'blank': 'vide',
    'blanket': 'couverture',
    'blind': 'aveugle',
    'block': 'bloc',
    'blood': 'sang',
    'blow': 'souffler',
    'blue': 'bleu',
    'board': 'conseil',
    'boat': 'bateau',
    'body': 'corps',
    'bomb': 'bombe',
    'bond': 'lien',
    'bone': 'os',
    'book': 'livre',
    'boom': 'boom',
    'boost': 'stimuler',
    'boot': 'botte',
    'border': 'fronti√®re',
    'born': 'n√©',
    'borrow': 'emprunter',
    'boss': 'patron',
    'both': 'les deux',
    'bother': 'd√©ranger',
    'bottle': 'bouteille',
    'bottom': 'fond',
    'boundary': 'fronti√®re',
    'bowl': 'bol',
    'box': 'bo√Æte',
    'boy': 'gar√ßon',
    'boyfriend': 'petit ami',
    'brain': 'cerveau',
    'branch': 'branche',
    'brand': 'marque',
    'brave': 'courageux',
    'bread': 'pain',
    'break': 'casser',
    'breakfast': 'petit-d√©jeuner',
    'breast': 'sein',
    'breath': 'souffle',
    'breathe': 'respirer',
    'breed': 'race',
    'brick': 'brique',
    'bridge': 'pont',
    'brief': 'bref',
    'briefly': 'bri√®vement',
    'bright': 'brillant',
    'brilliant': 'brillant',
    'bring': 'apporter',
    'broad': 'large',
    'broken': 'cass√©',
    'brother': 'fr√®re',
    'brown': 'marron',
    'brush': 'brosse',
    'budget': 'budget',
    'build': 'construire',
    'building': 'b√¢timent',
    'bullet': 'balle',
    'bunch': 'groupe',
    'burden': 'fardeau',
    'burn': 'br√ªler',
    'bury': 'enterrer',
    'bus': 'bus',
    'business': 'entreprise',
    'busy': 'occup√©',
    'but': 'mais',
    'butter': 'beurre',
    'button': 'bouton',
    'buy': 'acheter',
    'buyer': 'acheteur',
    'by': 'par',

    // Mots commen√ßant par C
    'cabinet': 'cabinet',
    'cable': 'c√¢ble',
    'cake': 'g√¢teau',
    'calculate': 'calculer',
    'call': 'appeler',
    'camera': 'cam√©ra',
    'camp': 'camp',
    'campaign': 'campagne',
    'campus': 'campus',
    'can': 'pouvoir',
    'cancer': 'cancer',
    'candidate': 'candidat',
    'candy': 'bonbon',
    'cap': 'casquette',
    'capability': 'capacit√©',
    'capable': 'capable',
    'capacity': 'capacit√©',
    'capital': 'capital',
    'captain': 'capitaine',
    'capture': 'capturer',
    'car': 'voiture',
    'carbon': 'carbone',
    'card': 'carte',
    'care': 'soin',
    'career': 'carri√®re',
    'careful': 'prudent',
    'carefully': 'soigneusement',
    'carry': 'porter',
    'case': 'cas',
    'cash': 'argent',
    'cast': 'jeter',
    'cat': 'chat',
    'catch': 'attraper',
    'category': 'cat√©gorie',
    'cause': 'cause',
    'ceiling': 'plafond',
    'celebrate': 'c√©l√©brer',
    'celebration': 'c√©l√©bration',
    'celebrity': 'c√©l√©brit√©',
    'cell': 'cellule',
    'center': 'centre',
    'central': 'central',
    'century': 'si√®cle',
    'ceremony': 'c√©r√©monie',
    'certain': 'certain',
    'certainly': 'certainement',
    'chain': 'cha√Æne',
    'chair': 'chaise',
    'chairman': 'pr√©sident',
    'challenge': 'd√©fi',
    'chamber': 'chambre',
    'champion': 'champion',
    'championship': 'championnat',
    'chance': 'chance',
    'change': 'changer',
    'channel': 'cha√Æne',
    'chapter': 'chapitre',
    'character': 'caract√®re',
    'characteristic': 'caract√©ristique',
    'characterize': 'caract√©riser',
    'charge': 'charger',
    'charity': 'charit√©',
    'chart': 'graphique',
    'chase': 'chasser',
    'cheap': 'bon march√©',
    'check': 'v√©rifier',
    'cheek': 'joue',
    'cheese': 'fromage',
    'chemical': 'chimique',
    'chest': 'poitrine',
    'chicken': 'poulet',
    'chief': 'chef',
    'child': 'enfant',
    'childhood': 'enfance',
    'chin': 'menton',
    'chocolate': 'chocolat',
    'choice': 'choix',
    'choose': 'choisir',
    'church': '√©glise',
    'cigarette': 'cigarette',
    'circle': 'cercle',
    'circumstance': 'circonstance',
    'cite': 'citer',
    'citizen': 'citoyen',
    'city': 'ville',
    'civil': 'civil',
    'civilian': 'civil',
    'claim': 'revendiquer',
    'class': 'classe',
    'classic': 'classique',
    'classroom': 'salle de classe',
    'clean': 'propre',
    'clear': 'clair',
    'clearly': 'clairement',
    'client': 'client',
    'climate': 'climat',
    'climb': 'grimper',
    'clinic': 'clinique',
    'clock': 'horloge',
    'close': 'fermer',
    'closely': '√©troitement',
    'closer': 'plus proche',
    'clothes': 'v√™tements',
    'clothing': 'v√™tements',
    'cloud': 'nuage',
    'club': 'club',
    'clue': 'indice',
    'coach': 'entra√Æneur',
    'coal': 'charbon',
    'coast': 'c√¥te',
    'coat': 'manteau',
    'code': 'code',
    'coffee': 'caf√©',
    'coin': 'pi√®ce',
    'cold': 'froid',
    'collapse': 'effondrer',
    'colleague': 'coll√®gue',
    'collect': 'collecter',
    'collection': 'collection',
    'college': 'universit√©',
    'color': 'couleur',
    'column': 'colonne',
    'combination': 'combinaison',
    'combine': 'combiner',
    'come': 'venir',
    'comedy': 'com√©die',
    'comfort': 'confort',
    'comfortable': 'confortable',
    'command': 'commande',
    'comment': 'commentaire',
    'commercial': 'commercial',
    'commission': 'commission',
    'commit': 'commettre',
    'commitment': 'engagement',
    'committee': 'comit√©',
    'common': 'commun',
    'communicate': 'communiquer',
    'communication': 'communication',
    'community': 'communaut√©',
    'company': 'entreprise',
    'compare': 'comparer',
    'comparison': 'comparaison',
    'compete': 'concourir',
    'competition': 'comp√©tition',
    'competitive': 'comp√©titif',
    'competitor': 'concurrent',
    'complain': 'se plaindre',
    'complaint': 'plainte',
    'complete': 'complet',
    'completely': 'compl√®tement',
    'complex': 'complexe',
    'complicated': 'compliqu√©',
    'component': 'composant',
    'compose': 'composer',
    'computer': 'ordinateur',
    'concentrate': 'concentrer',
    'concentration': 'concentration',
    'concept': 'concept',
    'concern': 'inqui√©tude',
    'concerned': 'inquiet',
    'concert': 'concert',
    'conclude': 'conclure',
    'conclusion': 'conclusion',
    'concrete': 'b√©ton',
    'condition': 'condition',
    'conduct': 'conduire',
    'conference': 'conf√©rence',
    'confidence': 'confiance',
    'confident': 'confiant',
    'confirm': 'confirmer',
    'conflict': 'conflit',
    'confront': 'confronter',
    'confusion': 'confusion',
    'congress': 'congr√®s',
    'connect': 'connecter',
    'connection': 'connexion',
    'consciousness': 'conscience',
    'consequence': 'cons√©quence',
    'conservative': 'conservateur',
    'consider': 'consid√©rer',
    'consideration': 'consid√©ration',
    'consist': 'consister',
    'consistent': 'coh√©rent',
    'constant': 'constant',
    'constantly': 'constamment',
    'constitute': 'constituer',
    'constitution': 'constitution',
    'construct': 'construire',
    'construction': 'construction',
    'consultant': 'consultant',
    'consume': 'consommer',
    'consumer': 'consommateur',
    'contact': 'contact',
    'contain': 'contenir',
    'container': 'conteneur',
    'contemporary': 'contemporain',
    'content': 'contenu',
    'contest': 'concours',
    'context': 'contexte',
    'continue': 'continuer',
    'continued': 'continu√©',
    'contract': 'contrat',
    'contractor': 'entrepreneur',
    'contrast': 'contraste',
    'contribute': 'contribuer',
    'contribution': 'contribution',
    'control': 'contr√¥le',
    'controversial': 'controvers√©',
    'controversy': 'controverse',
    'convention': 'convention',
    'conventional': 'conventionnel',
    'conversation': 'conversation',
    'convert': 'convertir',
    'convince': 'convaincre',
    'cook': 'cuisiner',
    'cookie': 'biscuit',
    'cooking': 'cuisine',
    'cool': 'frais',
    'cooperation': 'coop√©ration',
    'cope': 'faire face',
    'copy': 'copie',
    'core': 'noyau',
    'corn': 'ma√Øs',
    'corner': 'coin',
    'corporate': 'corporatif',
    'corporation': 'soci√©t√©',
    'correct': 'correct',
    'cost': 'co√ªt',
    'cotton': 'coton',
    'couch': 'canap√©',
    'could': 'pourrait',
    'council': 'conseil',
    'count': 'compter',
    'counter': 'comptoir',
    'country': 'pays',
    'county': 'comt√©',
    'couple': 'couple',
    'courage': 'courage',
    'course': 'cours',
    'court': 'tribunal',
    'cousin': 'cousin',
    'cover': 'couvrir',
    'coverage': 'couverture',
    'cow': 'vache',
    'crack': 'fissure',
    'craft': 'artisanat',
    'crash': 'accident',
    'crazy': 'fou',
    'cream': 'cr√®me',
    'create': 'cr√©er',
    'creation': 'cr√©ation',
    'creative': 'cr√©atif',
    'creature': 'cr√©ature',
    'credit': 'cr√©dit',
    'crew': '√©quipage',
    'crime': 'crime',
    'criminal': 'criminel',
    'crisis': 'crise',
    'criteria': 'crit√®res',
    'critic': 'critique',
    'critical': 'critique',
    'criticism': 'critique',
    'criticize': 'critiquer',
    'crop': 'r√©colte',
    'cross': 'croix',
    'crowd': 'foule',
    'crucial': 'crucial',
    'cry': 'pleurer',
    'cultural': 'culturel',
    'culture': 'culture',
    'cup': 'tasse',
    'curious': 'curieux',
    'current': 'actuel',
    'currently': 'actuellement',
    'curve': 'courbe',
    'custom': 'coutume',
    'customer': 'client',
    'cut': 'couper',
    'cycle': 'cycle'
};

// Fonction pour appliquer les corrections en lot
function massiveCorrection() {
    let corrected = 0;

    for (const [word, translation] of Object.entries(massiveTranslationDict)) {
        try {
            const stmt = db.db.prepare(`
                UPDATE words 
                SET translation = ?, 
                    updated_at = CURRENT_TIMESTAMP
                WHERE word = ? AND translation = ?
            `);

            const result = stmt.run(translation, word, `[${word}]`);

            if (result.changes > 0) {
                console.log(`‚úÖ ${word} -> ${translation}`);
                corrected++;
            }
        } catch (error) {
            console.error(`‚ùå Erreur pour "${word}":`, error.message);
        }
    }

    return corrected;
}

console.log('\nüöÄ Application de la correction massive...');
const corrected = massiveCorrection();

// V√©rification finale
const finalStats = {
    total: db.db.prepare('SELECT COUNT(*) as count FROM words').get().count,
    translated: db.db.prepare('SELECT COUNT(*) as count FROM words WHERE translation NOT LIKE \'[%]\'').get().count,
    untranslated: db.db.prepare('SELECT COUNT(*) as count FROM words WHERE translation LIKE \'[%]\'').get().count
};

console.log(`\nüìä R√©sum√© de la correction massive:`);
console.log(`   ‚úÖ Mots corrig√©s dans cette session: ${corrected}`);
console.log(`   üìö Total des mots: ${finalStats.total}`);
console.log(`   ‚úÖ Mots traduits: ${finalStats.translated} (${Math.round(finalStats.translated / finalStats.total * 100)}%)`);
console.log(`   ‚ö†Ô∏è  Mots non traduits restants: ${finalStats.untranslated} (${Math.round(finalStats.untranslated / finalStats.total * 100)}%)`);

console.log('\nüéâ Correction massive termin√©e ! L\'application devrait √™tre beaucoup plus compl√®te maintenant.');

db.db.close();
