import Database from 'better-sqlite3';

// Ouvrir la base de données
const db = new Database('english-app.db');

console.log('🔍 Ajout de traductions pour les mots les plus courants...\n');

// Dictionnaire de traductions pour les mots les plus fréquents
const commonTranslations = {
    // Mots très fréquents
    'additional': 'supplémentaire',
    'access': 'accès',
    'accept': 'accepter',
    'acceptable': 'acceptable',
    'accident': 'accident',
    'accompany': 'accompagner',
    'accomplish': 'accomplir',
    'according': 'selon',
    'account': 'compte',
    'accurate': 'précis',
    'accuse': 'accuser',
    'absence': 'absence',
    'advance': 'avancer',
    'advanced': 'avancé',
    'advantage': 'avantage',
    'adventure': 'aventure',
    'advertise': 'faire de la publicité',
    'advertisement': 'publicité',
    'advertising': 'publicité',
    'advice': 'conseil',
    'advise': 'conseiller',
    'adviser': 'conseiller',
    'advocate': 'défenseur',
    'adjust': 'ajuster',
    'adjustment': 'ajustement',
    'agency': 'agence',
    'ah': 'ah',
    'aide': 'assistant',
    'aids': 'SIDA',
    'alliance': 'alliance',
    'ally': 'allié',
    'alternative': 'alternative',
    'am': 'suis',
    'amazed': 'émerveillé',
    'ambition': 'ambition',
    'analysis': 'analyse',
    'analyst': 'analyste',
    'analyze': 'analyser',
    'ancient': 'ancien',
    'ankle': 'cheville',
    'announce': 'annoncer',
    'announcement': 'annonce',
    'annoy': 'ennuyer',
    'annoyed': 'ennuyé',
    'annoying': 'ennuyeux',
    'anxious': 'anxieux',
    'apartment': 'appartement',
    'apologize': 's\'excuser',
    'app': 'application',
    'appearance': 'apparence',
    'april': 'avril',
    'architecture': 'architecture',
    'artificial': 'artificiel',
    'ashamed': 'honteux',
    'assistance': 'assistance',
    'associated': 'associé',
    'assure': 'assurer',
    'dear': 'cher',
    'debt': 'dette',
    'december': 'décembre',
    'decent': 'décent',
    'deck': 'pont',
    'declare': 'déclarer',
    'decline': 'déclin',
    'decorate': 'décorer',
    'decoration': 'décoration',
    'decrease': 'diminuer',
    'deeply': 'profondément',
    'deer': 'cerf',
    'defeat': 'défaite',
    'defensive': 'défensif',
    'deficit': 'déficit',
    'define': 'définir',
    'definite': 'défini',
    'definitely': 'définitivement',
    'definition': 'définition',
    'delay': 'retard',
    'deliberate': 'délibéré',
    'deliberately': 'délibérément',
    'delicious': 'délicieux',
    'delivery': 'livraison',
    'demand': 'demande',
    'democracy': 'démocratie',
    'democrat': 'démocrate',
    'demonstrate': 'démontrer',
    'demonstration': 'manifestation',
    'dentist': 'dentiste',
    'deny': 'nier',
    'departure': 'départ',
    'depend': 'dépendre',
    'dependent': 'dépendant',
    'depending': 'selon',
    'depict': 'dépeindre',
    'depressed': 'déprimé',
    'depressing': 'déprimant',
    'depression': 'dépression',
    'depth': 'profondeur',
    'deputy': 'adjoint',
    'derive': 'dériver',
    'description': 'description',
    'desert': 'désert',
    'deserve': 'mériter',
    'desire': 'désir',
    'desk': 'bureau',
    'desperate': 'désespéré',
    'dessert': 'dessert',
    'destination': 'destination',
    'destroy': 'détruire',
    'destruction': 'destruction',
    'detailed': 'détaillé',
    'detect': 'détecter',
    'detective': 'détective',
    'determined': 'déterminé',
    'developing': 'développement',
    'device': 'appareil',
    'devote': 'consacrer',
    'diagram': 'diagramme',
    'dialogue': 'dialogue',
    'diamond': 'diamant',
    'diary': 'journal intime',
    'dictionary': 'dictionnaire',
    'diet': 'régime',
    'differ': 'différer',
    'difference': 'différence',
    'differently': 'différemment',
    'difficult': 'difficile',
    'difficulty': 'difficulté',
    'dig': 'creuser',
    'digital': 'numérique',
    'dinner': 'dîner',
    'direct': 'direct',
    'direction': 'direction',
    'directly': 'directement',
    'director': 'directeur',
    'dirt': 'saleté',
    'disadvantage': 'inconvénient',
    'disagree': 'être en désaccord',
    'disappear': 'disparaître',
    'disappointed': 'déçu',
    'disappointing': 'décevant',
    'disaster': 'catastrophe',
    'discipline': 'discipline',
    'discount': 'remise',
    'discover': 'découvrir',
    'discovery': 'découverte',
    'discuss': 'discuter',
    'discussion': 'discussion',
    'disease': 'maladie',
    'dish': 'plat',
    'dishonest': 'malhonnête',
    'disk': 'disque',
    'dislike': 'ne pas aimer',
    'dismiss': 'renvoyer',
    'display': 'affichage',
    'distance': 'distance',
    'distribute': 'distribuer',
    'distribution': 'distribution',
    'district': 'district',
    'divide': 'diviser',
    'division': 'division',
    'divorced': 'divorcé',
    'do': 'faire',
    'doctor': 'médecin',
    'document': 'document',
    'documentary': 'documentaire',
    'dollar': 'dollar',
    'domestic': 'domestique',
    'dominate': 'dominer',
    'donate': 'donner',
    'door': 'porte',
    'double': 'double',
    'doubt': 'doute',
    'down': 'en bas',
    'download': 'télécharger',
    'downstairs': 'en bas',
    'downtown': 'centre-ville',
    'downward': 'vers le bas',
    'dozen': 'douzaine',
    'draft': 'brouillon',
    'drag': 'traîner',
    'drama': 'drame',
    'dramatic': 'dramatique',
    'draw': 'dessiner',
    'drawing': 'dessin',
    'dream': 'rêve',
    'dress': 'robe',
    'dressed': 'habillé',
    'drink': 'boisson',
    'drive': 'conduire',
    'driver': 'conducteur',
    'driving': 'conduite',
    'drop': 'laisser tomber',
    'drug': 'drogue',
    'drum': 'tambour',
    'drunk': 'ivre',
    'dry': 'sec',
    'due': 'dû',
    'during': 'pendant',
    'dust': 'poussière',
    'duty': 'devoir',
    'dvd': 'DVD'
};

console.log(`📝 Ajout de ${Object.keys(commonTranslations).length} traductions...\n`);

const updateStmt = db.prepare('UPDATE words SET translation = ? WHERE word = ? AND translation = ?');
let updated = 0;

for (const [word, translation] of Object.entries(commonTranslations)) {
    const result = updateStmt.run(translation, word, '[ ]');
    if (result.changes > 0) {
        updated++;
        console.log(`✅ ${word} → ${translation}`);
    }
}

console.log(`\n🎯 ${updated} traductions ajoutées avec succès`);

// Statistiques finales
const stats = db.prepare(`
    SELECT 
        COUNT(*) as total,
        COUNT(CASE WHEN translation != '[ ]' THEN 1 END) as with_real_translation,
        COUNT(CASE WHEN translation = '[ ]' THEN 1 END) as without_translation
    FROM words
`).get();

console.log('\n📈 Nouvelles statistiques:');
console.log(`- Total des mots: ${stats.total}`);
console.log(`- Avec vraie traduction: ${stats.with_real_translation}`);
console.log(`- Sans traduction ([ ]): ${stats.without_translation}`);
console.log(`- Pourcentage traduit: ${((stats.with_real_translation / stats.total) * 100).toFixed(1)}%`);

db.close();
console.log('\n✅ Mise à jour terminée');
