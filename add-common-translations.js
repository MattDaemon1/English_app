import Database from 'better-sqlite3';

// Ouvrir la base de donnÃ©es
const db = new Database('english-app.db');

console.log('ðŸ” Ajout de traductions pour les mots les plus courants...\n');

// Dictionnaire de traductions pour les mots les plus frÃ©quents
const commonTranslations = {
    // Mots trÃ¨s frÃ©quents
    'additional': 'supplÃ©mentaire',
    'access': 'accÃ¨s',
    'accept': 'accepter',
    'acceptable': 'acceptable',
    'accident': 'accident',
    'accompany': 'accompagner',
    'accomplish': 'accomplir',
    'according': 'selon',
    'account': 'compte',
    'accurate': 'prÃ©cis',
    'accuse': 'accuser',
    'absence': 'absence',
    'advance': 'avancer',
    'advanced': 'avancÃ©',
    'advantage': 'avantage',
    'adventure': 'aventure',
    'advertise': 'faire de la publicitÃ©',
    'advertisement': 'publicitÃ©',
    'advertising': 'publicitÃ©',
    'advice': 'conseil',
    'advise': 'conseiller',
    'adviser': 'conseiller',
    'advocate': 'dÃ©fenseur',
    'adjust': 'ajuster',
    'adjustment': 'ajustement',
    'agency': 'agence',
    'ah': 'ah',
    'aide': 'assistant',
    'aids': 'SIDA',
    'alliance': 'alliance',
    'ally': 'alliÃ©',
    'alternative': 'alternative',
    'am': 'suis',
    'amazed': 'Ã©merveillÃ©',
    'ambition': 'ambition',
    'analysis': 'analyse',
    'analyst': 'analyste',
    'analyze': 'analyser',
    'ancient': 'ancien',
    'ankle': 'cheville',
    'announce': 'annoncer',
    'announcement': 'annonce',
    'annoy': 'ennuyer',
    'annoyed': 'ennuyÃ©',
    'annoying': 'ennuyeux',
    'anxious': 'anxieux',
    'apartment': 'appartement',
    'apologize': 's\'excuser',
    'app': 'application',
    'appearance': 'apparence',
    'april': 'avril',
    'architecture': 'architecture',
    'artificial': 'artificiel',
    'ashamed': 'honteux',
    'assistance': 'assistance',
    'associated': 'associÃ©',
    'assure': 'assurer',
    'dear': 'cher',
    'debt': 'dette',
    'december': 'dÃ©cembre',
    'decent': 'dÃ©cent',
    'deck': 'pont',
    'declare': 'dÃ©clarer',
    'decline': 'dÃ©clin',
    'decorate': 'dÃ©corer',
    'decoration': 'dÃ©coration',
    'decrease': 'diminuer',
    'deeply': 'profondÃ©ment',
    'deer': 'cerf',
    'defeat': 'dÃ©faite',
    'defensive': 'dÃ©fensif',
    'deficit': 'dÃ©ficit',
    'define': 'dÃ©finir',
    'definite': 'dÃ©fini',
    'definitely': 'dÃ©finitivement',
    'definition': 'dÃ©finition',
    'delay': 'retard',
    'deliberate': 'dÃ©libÃ©rÃ©',
    'deliberately': 'dÃ©libÃ©rÃ©ment',
    'delicious': 'dÃ©licieux',
    'delivery': 'livraison',
    'demand': 'demande',
    'democracy': 'dÃ©mocratie',
    'democrat': 'dÃ©mocrate',
    'demonstrate': 'dÃ©montrer',
    'demonstration': 'manifestation',
    'dentist': 'dentiste',
    'deny': 'nier',
    'departure': 'dÃ©part',
    'depend': 'dÃ©pendre',
    'dependent': 'dÃ©pendant',
    'depending': 'selon',
    'depict': 'dÃ©peindre',
    'depressed': 'dÃ©primÃ©',
    'depressing': 'dÃ©primant',
    'depression': 'dÃ©pression',
    'depth': 'profondeur',
    'deputy': 'adjoint',
    'derive': 'dÃ©river',
    'description': 'description',
    'desert': 'dÃ©sert',
    'deserve': 'mÃ©riter',
    'desire': 'dÃ©sir',
    'desk': 'bureau',
    'desperate': 'dÃ©sespÃ©rÃ©',
    'dessert': 'dessert',
    'destination': 'destination',
    'destroy': 'dÃ©truire',
    'destruction': 'destruction',
    'detailed': 'dÃ©taillÃ©',
    'detect': 'dÃ©tecter',
    'detective': 'dÃ©tective',
    'determined': 'dÃ©terminÃ©',
    'developing': 'dÃ©veloppement',
    'device': 'appareil',
    'devote': 'consacrer',
    'diagram': 'diagramme',
    'dialogue': 'dialogue',
    'diamond': 'diamant',
    'diary': 'journal intime',
    'dictionary': 'dictionnaire',
    'diet': 'rÃ©gime',
    'differ': 'diffÃ©rer',
    'difference': 'diffÃ©rence',
    'differently': 'diffÃ©remment',
    'difficult': 'difficile',
    'difficulty': 'difficultÃ©',
    'dig': 'creuser',
    'digital': 'numÃ©rique',
    'dinner': 'dÃ®ner',
    'direct': 'direct',
    'direction': 'direction',
    'directly': 'directement',
    'director': 'directeur',
    'dirt': 'saletÃ©',
    'disadvantage': 'inconvÃ©nient',
    'disagree': 'Ãªtre en dÃ©saccord',
    'disappear': 'disparaÃ®tre',
    'disappointed': 'dÃ©Ã§u',
    'disappointing': 'dÃ©cevant',
    'disaster': 'catastrophe',
    'discipline': 'discipline',
    'discount': 'remise',
    'discover': 'dÃ©couvrir',
    'discovery': 'dÃ©couverte',
    'discuss': 'discuter',
    'discussion': 'discussion',
    'disease': 'maladie',
    'dish': 'plat',
    'dishonest': 'malhonnÃªte',
    'disk': 'disque',
    'dislike': 'ne pas aimer',
    'dismiss': 'renvoyer',
    'display': 'affichage',
    'distance': 'distance',
    'distribute': 'distribuer',
    'distribution': 'distribution',
    'district': 'district',
    'divide': 'diviser',
    'division': 'division',
    'divorced': 'divorcÃ©',
    'do': 'faire',
    'doctor': 'mÃ©decin',
    'document': 'document',
    'documentary': 'documentaire',
    'dollar': 'dollar',
    'domestic': 'domestique',
    'dominate': 'dominer',
    'donate': 'donner',
    'door': 'porte',
    'double': 'double',
    'doubt': 'doute',
    'down': 'en bas',
    'download': 'tÃ©lÃ©charger',
    'downstairs': 'en bas',
    'downtown': 'centre-ville',
    'downward': 'vers le bas',
    'dozen': 'douzaine',
    'draft': 'brouillon',
    'drag': 'traÃ®ner',
    'drama': 'drame',
    'dramatic': 'dramatique',
    'draw': 'dessiner',
    'drawing': 'dessin',
    'dream': 'rÃªve',
    'dress': 'robe',
    'dressed': 'habillÃ©',
    'drink': 'boisson',
    'drive': 'conduire',
    'driver': 'conducteur',
    'driving': 'conduite',
    'drop': 'laisser tomber',
    'drug': 'drogue',
    'drum': 'tambour',
    'drunk': 'ivre',
    'dry': 'sec',
    'due': 'dÃ»',
    'during': 'pendant',
    'dust': 'poussiÃ¨re',
    'duty': 'devoir',
    'dvd': 'DVD'
};

console.log(`ðŸ“ Ajout de ${Object.keys(commonTranslations).length} traductions...\n`);

const updateStmt = db.prepare('UPDATE words SET translation = ? WHERE word = ? AND translation = ?');
let updated = 0;

for (const [word, translation] of Object.entries(commonTranslations)) {
    const result = updateStmt.run(translation, word, '[ ]');
    if (result.changes > 0) {
        updated++;
        console.log(`âœ… ${word} â†’ ${translation}`);
    }
}

console.log(`\nðŸŽ¯ ${updated} traductions ajoutÃ©es avec succÃ¨s`);

// Statistiques finales
const stats = db.prepare(`
    SELECT 
        COUNT(*) as total,
        COUNT(CASE WHEN translation != '[ ]' THEN 1 END) as with_real_translation,
        COUNT(CASE WHEN translation = '[ ]' THEN 1 END) as without_translation
    FROM words
`).get();

console.log('\nðŸ“ˆ Nouvelles statistiques:');
console.log(`- Total des mots: ${stats.total}`);
console.log(`- Avec vraie traduction: ${stats.with_real_translation}`);
console.log(`- Sans traduction ([ ]): ${stats.without_translation}`);
console.log(`- Pourcentage traduit: ${((stats.with_real_translation / stats.total) * 100).toFixed(1)}%`);

db.close();
console.log('\nâœ… Mise Ã  jour terminÃ©e');
