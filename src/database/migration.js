import { getDatabase } from './database.js';
import { wordsData } from '../../words.js';
import fs from 'fs';
import path from 'path';

class DataMigration {
    constructor() {
        this.db = getDatabase();
    }

    // Migrer les mots existants de words.js
    async migrateWordsData() {
        console.log('üöÄ D√©marrage de la migration des mots...');

        let imported = 0;
        let skipped = 0;

        for (const word of wordsData) {
            try {
                this.db.insertWord({
                    word: word.word,
                    translation: word.translation,
                    pronunciation: word.pronunciation,
                    partOfSpeech: word.partOfSpeech,
                    definition: word.definition,
                    example: word.example,
                    exampleTranslation: word.exampleTranslation,
                    difficulty: word.difficulty || 'beginner',
                    category: word.category || 'general'
                });
                imported++;
            } catch (error) {
                if (error.code === 'SQLITE_CONSTRAINT_UNIQUE') {
                    skipped++;
                } else {
                    console.error(`‚ùå Erreur pour le mot "${word.word}":`, error.message);
                }
            }
        }

        console.log(`‚úÖ Migration termin√©e: ${imported} mots import√©s, ${skipped} mots ignor√©s (doublons)`);
        return { imported, skipped };
    }

    // Migrer la liste de 3000 mots en ajoutant des traductions basiques
    async migrate3000Words() {
        console.log('üìö D√©marrage de la migration des 3000 mots...');

        const filePath = path.join(process.cwd(), '3000_english_words.txt');

        if (!fs.existsSync(filePath)) {
            console.error('‚ùå Fichier 3000_english_words.txt non trouv√©');
            return { imported: 0, skipped: 0 };
        }

        const content = fs.readFileSync(filePath, 'utf-8');
        const words = content.split('\n').filter(word => word.trim().length > 0);

        let imported = 0;
        let skipped = 0;

        // Dictionnaire de traductions basiques pour les mots les plus courants
        const basicTranslations = {
            'a': 'un/une',
            'abandon': 'abandonner',
            'ability': 'capacit√©',
            'able': 'capable',
            'about': '√† propos de',
            'above': 'au-dessus',
            'abroad': '√† l\'√©tranger',
            'absence': 'absence',
            'absolute': 'absolu',
            'absolutely': 'absolument',
            'accept': 'accepter',
            'access': 'acc√®s',
            'accident': 'accident',
            'according': 'selon',
            'account': 'compte',
            'across': '√† travers',
            'action': 'action',
            'activity': 'activit√©',
            'actually': 'en fait',
            'address': 'adresse',
            'administration': 'administration',
            'admit': 'admettre',
            'adult': 'adulte',
            'advance': 'avancer',
            'advantage': 'avantage',
            'adventure': 'aventure',
            'advice': 'conseil',
            'affect': 'affecter',
            'afford': 'se permettre',
            'afraid': 'avoir peur',
            'after': 'apr√®s',
            'afternoon': 'apr√®s-midi',
            'again': 'encore',
            'against': 'contre',
            'age': '√¢ge',
            'agency': 'agence',
            'agent': 'agent',
            'ago': 'il y a',
            'agree': '√™tre d\'accord',
            'agreement': 'accord',
            'ahead': 'devant',
            'air': 'air',
            'all': 'tout',
            'allow': 'permettre',
            'almost': 'presque',
            'alone': 'seul',
            'along': 'le long de',
            'already': 'd√©j√†',
            'also': 'aussi',
            'although': 'bien que',
            'always': 'toujours',
            'amazing': 'incroyable',
            'among': 'parmi',
            'amount': 'montant',
            'analysis': 'analyse',
            'and': 'et',
            'anger': 'col√®re',
            'animal': 'animal',
            'anniversary': 'anniversaire',
            'announce': 'annoncer',
            'another': 'autre',
            'answer': 'r√©ponse',
            'any': 'n\'importe quel',
            'anybody': 'n\'importe qui',
            'anyone': 'n\'importe qui',
            'anything': 'n\'importe quoi',
            'anyway': 'de toute fa√ßon',
            'anywhere': 'n\'importe o√π',
            'appear': 'appara√Ætre',
            'apply': 'appliquer',
            'approach': 'approche',
            'area': 'zone',
            'argue': 'argumenter',
            'arm': 'bras',
            'army': 'arm√©e',
            'around': 'autour',
            'arrive': 'arriver',
            'art': 'art',
            'article': 'article',
            'artist': 'artiste',
            'as': 'comme',
            'ask': 'demander',
            'assume': 'supposer',
            'at': '√†',
            'attack': 'attaque',
            'attempt': 'tentative',
            'attend': 'assister',
            'attention': 'attention',
            'attitude': 'attitude',
            'attract': 'attirer',
            'audience': 'public',
            'author': 'auteur',
            'authority': 'autorit√©',
            'available': 'disponible',
            'avoid': '√©viter',
            'away': 'loin',
            'baby': 'b√©b√©',
            'back': 'dos/retour',
            'bad': 'mauvais',
            'bag': 'sac',
            'ball': 'balle',
            'bank': 'banque',
            'bar': 'bar',
            'base': 'base',
            'basic': 'basique',
            'battle': 'bataille',
            'be': '√™tre',
            'beat': 'battre',
            'beautiful': 'beau/belle',
            'because': 'parce que',
            'become': 'devenir',
            'bed': 'lit',
            'bedroom': 'chambre',
            'beer': 'bi√®re',
            'before': 'avant',
            'begin': 'commencer',
            'behavior': 'comportement',
            'behind': 'derri√®re',
            'believe': 'croire',
            'benefit': 'b√©n√©fice',
            'best': 'meilleur',
            'better': 'mieux',
            'between': 'entre',
            'beyond': 'au-del√†',
            'big': 'grand',
            'bill': 'facture',
            'billion': 'milliard',
            'bit': 'peu',
            'black': 'noir',
            'blood': 'sang',
            'blow': 'coup',
            'blue': 'bleu',
            'board': 'planche/conseil',
            'boat': 'bateau',
            'body': 'corps',
            'book': 'livre',
            'born': 'n√©',
            'both': 'les deux',
            'box': 'bo√Æte',
            'boy': 'gar√ßon',
            'break': 'casser',
            'bring': 'apporter',
            'brother': 'fr√®re',
            'budget': 'budget',
            'build': 'construire',
            'building': 'b√¢timent',
            'business': 'affaires',
            'but': 'mais',
            'buy': 'acheter',
            'by': 'par',
            'call': 'appeler',
            'camera': 'cam√©ra',
            'campaign': 'campagne',
            'can': 'pouvoir',
            'cancer': 'cancer',
            'candidate': 'candidat',
            'capital': 'capital',
            'car': 'voiture',
            'card': 'carte',
            'care': 'soin',
            'career': 'carri√®re',
            'carry': 'porter',
            'case': 'cas',
            'catch': 'attraper',
            'cause': 'cause',
            'cell': 'cellule',
            'center': 'centre',
            'central': 'central',
            'century': 'si√®cle',
            'certain': 'certain',
            'certainly': 'certainement',
            'chair': 'chaise',
            'challenge': 'd√©fi',
            'chance': 'chance',
            'change': 'changement',
            'character': 'caract√®re',
            'charge': 'charge',
            'check': 'v√©rifier',
            'child': 'enfant',
            'choice': 'choix',
            'choose': 'choisir',
            'church': '√©glise',
            'citizen': 'citoyen',
            'city': 'ville',
            'civil': 'civil',
            'claim': 'revendication',
            'class': 'classe',
            'clear': 'clair',
            'clearly': 'clairement',
            'close': 'proche/fermer',
            'coach': 'entra√Æneur',
            'cold': 'froid',
            'collection': 'collection',
            'college': 'universit√©',
            'color': 'couleur',
            'come': 'venir',
            'commercial': 'commercial',
            'common': 'commun',
            'community': 'communaut√©',
            'company': 'entreprise',
            'compare': 'comparer',
            'computer': 'ordinateur',
            'concern': 'pr√©occupation',
            'condition': 'condition',
            'conference': 'conf√©rence',
            'consider': 'consid√©rer',
            'consumer': 'consommateur',
            'contain': 'contenir',
            'continue': 'continuer',
            'control': 'contr√¥le',
            'cost': 'co√ªt',
            'could': 'pourrait',
            'country': 'pays',
            'couple': 'couple',
            'course': 'cours',
            'court': 'tribunal',
            'cover': 'couvrir',
            'create': 'cr√©er',
            'crime': 'crime',
            'cultural': 'culturel',
            'culture': 'culture',
            'cup': 'tasse',
            'current': 'actuel',
            'customer': 'client',
            'cut': 'couper',
            'dark': 'sombre',
            'data': 'donn√©es',
            'date': 'date',
            'daughter': 'fille',
            'day': 'jour',
            'dead': 'mort',
            'deal': 'affaire',
            'death': 'mort',
            'debate': 'd√©bat',
            'decade': 'd√©cennie',
            'decide': 'd√©cider',
            'decision': 'd√©cision',
            'deep': 'profond',
            'defense': 'd√©fense',
            'degree': 'degr√©',
            'democratic': 'd√©mocratique',
            'describe': 'd√©crire',
            'design': 'design',
            'despite': 'malgr√©',
            'detail': 'd√©tail',
            'determine': 'd√©terminer',
            'develop': 'd√©velopper',
            'development': 'd√©veloppement',
            'die': 'mourir',
            'difference': 'diff√©rence',
            'different': 'diff√©rent',
            'difficult': 'difficile',
            'dinner': 'd√Æner',
            'direction': 'direction',
            'director': 'directeur',
            'discover': 'd√©couvrir',
            'discuss': 'discuter',
            'discussion': 'discussion',
            'disease': 'maladie',
            'do': 'faire',
            'doctor': 'docteur',
            'dog': 'chien',
            'door': 'porte',
            'down': 'vers le bas',
            'draw': 'dessiner',
            'dream': 'r√™ve',
            'drive': 'conduire',
            'drop': 'tomber',
            'drug': 'drogue',
            'during': 'pendant',
            'each': 'chaque',
            'early': 't√¥t',
            'east': 'est',
            'easy': 'facile',
            'eat': 'manger',
            'economic': '√©conomique',
            'economy': '√©conomie',
            'edge': 'bord',
            'education': '√©ducation',
            'effect': 'effet',
            'effective': 'efficace',
            'effort': 'effort',
            'eight': 'huit',
            'either': 'soit',
            'election': '√©lection',
            'else': 'autre',
            'employee': 'employ√©',
            'end': 'fin',
            'energy': '√©nergie',
            'enjoy': 'appr√©cier',
            'enough': 'assez',
            'enter': 'entrer',
            'entire': 'entier',
            'environment': 'environnement',
            'especially': 'surtout',
            'establish': '√©tablir',
            'even': 'm√™me',
            'evening': 'soir',
            'event': '√©v√©nement',
            'ever': 'jamais',
            'every': 'chaque',
            'everybody': 'tout le monde',
            'everyone': 'tout le monde',
            'everything': 'tout',
            'evidence': 'preuve',
            'exactly': 'exactement',
            'example': 'exemple',
            'executive': 'ex√©cutif',
            'exist': 'exister',
            'expect': 'attendre',
            'experience': 'exp√©rience',
            'expert': 'expert',
            'explain': 'expliquer',
            'eye': '≈ìil',
            'face': 'visage',
            'fact': 'fait',
            'factor': 'facteur',
            'fail': '√©chouer',
            'fall': 'tomber',
            'family': 'famille',
            'far': 'loin',
            'fast': 'rapide',
            'father': 'p√®re',
            'fear': 'peur',
            'federal': 'f√©d√©ral',
            'feel': 'sentir',
            'feeling': 'sentiment',
            'few': 'peu',
            'field': 'champ',
            'fight': 'combattre',
            'figure': 'figure',
            'fill': 'remplir',
            'film': 'film',
            'final': 'final',
            'finally': 'finalement',
            'financial': 'financier',
            'find': 'trouver',
            'fine': 'bien',
            'finger': 'doigt',
            'finish': 'finir',
            'fire': 'feu',
            'firm': 'ferme',
            'first': 'premier',
            'fish': 'poisson',
            'five': 'cinq',
            'floor': 'sol',
            'fly': 'voler',
            'focus': 'focus',
            'follow': 'suivre',
            'food': 'nourriture',
            'foot': 'pied',
            'for': 'pour',
            'force': 'force',
            'foreign': '√©tranger',
            'forget': 'oublier',
            'form': 'forme',
            'former': 'ancien',
            'forward': 'en avant',
            'four': 'quatre',
            'free': 'libre',
            'friend': 'ami',
            'from': 'de',
            'front': 'devant',
            'full': 'plein',
            'fund': 'fonds',
            'future': 'futur',
            'game': 'jeu',
            'garden': 'jardin',
            'gas': 'gaz',
            'general': 'g√©n√©ral',
            'generation': 'g√©n√©ration',
            'get': 'obtenir',
            'girl': 'fille',
            'give': 'donner',
            'glass': 'verre',
            'go': 'aller',
            'goal': 'objectif',
            'god': 'dieu',
            'good': 'bon',
            'government': 'gouvernement',
            'great': 'grand',
            'green': 'vert',
            'ground': 'sol',
            'group': 'groupe',
            'grow': 'grandir',
            'growth': 'croissance',
            'guess': 'deviner',
            'gun': 'arme',
            'guy': 'gars',
            'hair': 'cheveux',
            'half': 'moiti√©',
            'hand': 'main',
            'hang': 'accrocher',
            'happen': 'arriver',
            'happy': 'heureux',
            'hard': 'dur',
            'have': 'avoir',
            'he': 'il',
            'head': 't√™te',
            'health': 'sant√©',
            'hear': 'entendre',
            'heart': 'c≈ìur',
            'heat': 'chaleur',
            'heavy': 'lourd',
            'help': 'aide',
            'her': 'elle',
            'here': 'ici',
            'herself': 'elle-m√™me',
            'high': 'haut',
            'him': 'lui',
            'himself': 'lui-m√™me',
            'his': 'son',
            'history': 'histoire',
            'hit': 'frapper',
            'hold': 'tenir',
            'home': 'maison',
            'hope': 'espoir',
            'hospital': 'h√¥pital',
            'hot': 'chaud',
            'hotel': 'h√¥tel',
            'hour': 'heure',
            'house': 'maison',
            'how': 'comment',
            'however': 'cependant',
            'huge': '√©norme',
            'human': 'humain',
            'hundred': 'cent',
            'husband': 'mari',
            'i': 'je',
            'idea': 'id√©e',
            'identify': 'identifier',
            'if': 'si',
            'image': 'image',
            'imagine': 'imaginer',
            'impact': 'impact',
            'important': 'important',
            'improve': 'am√©liorer',
            'in': 'dans',
            'include': 'inclure',
            'including': 'y compris',
            'increase': 'augmenter',
            'indeed': 'en effet',
            'indicate': 'indiquer',
            'individual': 'individuel',
            'industry': 'industrie',
            'information': 'information',
            'inside': '√† l\'int√©rieur',
            'instead': 'au lieu de',
            'institution': 'institution',
            'interest': 'int√©r√™t',
            'interesting': 'int√©ressant',
            'international': 'international',
            'interview': 'entretien',
            'into': 'dans',
            'investment': 'investissement',
            'involve': 'impliquer',
            'issue': 'probl√®me',
            'it': 'il/elle',
            'item': 'article',
            'its': 'son',
            'itself': 'lui-m√™me',
            'job': 'travail',
            'join': 'rejoindre',
            'just': 'juste',
            'keep': 'garder',
            'key': 'cl√©',
            'kid': 'enfant',
            'kill': 'tuer',
            'kind': 'gentil/type',
            'kitchen': 'cuisine',
            'know': 'savoir',
            'knowledge': 'connaissance',
            'land': 'terre',
            'language': 'langue',
            'large': 'grand',
            'last': 'dernier',
            'late': 'tard',
            'later': 'plus tard',
            'laugh': 'rire',
            'law': 'loi',
            'lawyer': 'avocat',
            'lay': 'poser',
            'lead': 'mener',
            'leader': 'leader',
            'learn': 'apprendre',
            'least': 'au moins',
            'leave': 'partir',
            'left': 'gauche',
            'leg': 'jambe',
            'legal': 'l√©gal',
            'less': 'moins',
            'let': 'laisser',
            'letter': 'lettre',
            'level': 'niveau',
            'lie': 'mentir',
            'life': 'vie',
            'light': 'lumi√®re',
            'like': 'aimer',
            'likely': 'probable',
            'line': 'ligne',
            'list': 'liste',
            'listen': '√©couter',
            'little': 'petit',
            'live': 'vivre',
            'local': 'local',
            'long': 'long',
            'look': 'regarder',
            'lose': 'perdre',
            'loss': 'perte',
            'lot': 'beaucoup',
            'love': 'amour',
            'low': 'bas',
            'machine': 'machine',
            'magazine': 'magazine',
            'main': 'principal',
            'maintain': 'maintenir',
            'major': 'majeur',
            'make': 'faire',
            'man': 'homme',
            'manage': 'g√©rer',
            'management': 'gestion',
            'manager': 'manager',
            'many': 'beaucoup',
            'market': 'march√©',
            'marriage': 'mariage',
            'material': 'mat√©riel',
            'matter': 'question',
            'may': 'peut',
            'maybe': 'peut-√™tre',
            'me': 'moi',
            'mean': 'signifier',
            'measure': 'mesure',
            'media': 'm√©dias',
            'medical': 'm√©dical',
            'meet': 'rencontrer',
            'meeting': 'r√©union',
            'member': 'membre',
            'memory': 'm√©moire',
            'mention': 'mentionner',
            'message': 'message',
            'method': 'm√©thode',
            'middle': 'milieu',
            'might': 'pourrait',
            'military': 'militaire',
            'million': 'million',
            'mind': 'esprit',
            'minute': 'minute',
            'miss': 'rater',
            'mission': 'mission',
            'model': 'mod√®le',
            'modern': 'moderne',
            'moment': 'moment',
            'money': 'argent',
            'month': 'mois',
            'more': 'plus',
            'morning': 'matin',
            'most': 'la plupart',
            'mother': 'm√®re',
            'mouth': 'bouche',
            'move': 'bouger',
            'movement': 'mouvement',
            'movie': 'film',
            'mr': 'monsieur',
            'mrs': 'madame',
            'much': 'beaucoup',
            'music': 'musique',
            'must': 'devoir',
            'my': 'mon',
            'myself': 'moi-m√™me',
            'name': 'nom',
            'nation': 'nation',
            'national': 'national',
            'natural': 'naturel',
            'nature': 'nature',
            'near': 'pr√®s',
            'nearly': 'presque',
            'necessary': 'n√©cessaire',
            'need': 'besoin',
            'network': 'r√©seau',
            'never': 'jamais',
            'new': 'nouveau',
            'news': 'nouvelles',
            'newspaper': 'journal',
            'next': 'suivant',
            'nice': 'gentil',
            'night': 'nuit',
            'no': 'non',
            'none': 'aucun',
            'nor': 'ni',
            'north': 'nord',
            'not': 'pas',
            'note': 'note',
            'nothing': 'rien',
            'notice': 'remarquer',
            'now': 'maintenant',
            'number': 'num√©ro',
            'occur': 'arriver',
            'of': 'de',
            'off': '√©teint',
            'offer': 'offre',
            'office': 'bureau',
            'officer': 'officier',
            'official': 'officiel',
            'often': 'souvent',
            'oh': 'oh',
            'oil': 'huile',
            'ok': 'd\'accord',
            'old': 'vieux',
            'on': 'sur',
            'once': 'une fois',
            'one': 'un',
            'only': 'seulement',
            'onto': 'sur',
            'open': 'ouvrir',
            'operation': 'op√©ration',
            'opportunity': 'opportunit√©',
            'option': 'option',
            'or': 'ou',
            'order': 'ordre',
            'organization': 'organisation',
            'other': 'autre',
            'others': 'autres',
            'our': 'notre',
            'out': 'dehors',
            'outside': 'dehors',
            'over': 'au-dessus',
            'own': 'propre',
            'owner': 'propri√©taire',
            'page': 'page',
            'pain': 'douleur',
            'painting': 'peinture',
            'paper': 'papier',
            'parent': 'parent',
            'part': 'partie',
            'participant': 'participant',
            'particular': 'particulier',
            'particularly': 'particuli√®rement',
            'partner': 'partenaire',
            'party': 'f√™te',
            'pass': 'passer',
            'past': 'pass√©',
            'patient': 'patient',
            'pattern': 'mod√®le',
            'pay': 'payer',
            'peace': 'paix',
            'people': 'gens',
            'per': 'par',
            'perform': 'performer',
            'performance': 'performance',
            'perhaps': 'peut-√™tre',
            'period': 'p√©riode',
            'person': 'personne',
            'personal': 'personnel',
            'phone': 't√©l√©phone',
            'physical': 'physique',
            'pick': 'choisir',
            'picture': 'image',
            'piece': 'morceau',
            'place': 'lieu',
            'plan': 'plan',
            'plant': 'plante',
            'play': 'jouer',
            'player': 'joueur',
            'pm': 'apr√®s-midi',
            'point': 'point',
            'police': 'police',
            'policy': 'politique',
            'political': 'politique',
            'politics': 'politique',
            'poor': 'pauvre',
            'popular': 'populaire',
            'population': 'population',
            'position': 'position',
            'positive': 'positif',
            'possible': 'possible',
            'power': 'pouvoir',
            'practice': 'pratique',
            'prepare': 'pr√©parer',
            'present': 'pr√©sent',
            'president': 'pr√©sident',
            'pressure': 'pression',
            'pretty': 'joli',
            'prevent': 'pr√©venir',
            'price': 'prix',
            'private': 'priv√©',
            'probably': 'probablement',
            'problem': 'probl√®me',
            'process': 'processus',
            'produce': 'produire',
            'product': 'produit',
            'production': 'production',
            'professional': 'professionnel',
            'professor': 'professeur',
            'program': 'programme',
            'project': 'projet',
            'property': 'propri√©t√©',
            'protect': 'prot√©ger',
            'prove': 'prouver',
            'provide': 'fournir',
            'public': 'public',
            'pull': 'tirer',
            'purpose': 'but',
            'push': 'pousser',
            'put': 'mettre',
            'quality': 'qualit√©',
            'question': 'question',
            'quickly': 'rapidement',
            'quite': 'assez',
            'race': 'course',
            'radio': 'radio',
            'raise': 'lever',
            'range': 'gamme',
            'rate': 'taux',
            'rather': 'plut√¥t',
            'rating': '√©valuation',
            'reach': 'atteindre',
            'read': 'lire',
            'ready': 'pr√™t',
            'real': 'r√©el',
            'reality': 'r√©alit√©',
            'realize': 'r√©aliser',
            'really': 'vraiment',
            'reason': 'raison',
            'receive': 'recevoir',
            'recent': 'r√©cent',
            'recently': 'r√©cemment',
            'recognize': 'reconna√Ætre',
            'record': 'enregistrement',
            'red': 'rouge',
            'reduce': 'r√©duire',
            'reflect': 'refl√©ter',
            'region': 'r√©gion',
            'relate': 'relier',
            'relationship': 'relation',
            'religious': 'religieux',
            'remain': 'rester',
            'remember': 'se souvenir',
            'remove': 'enlever',
            'report': 'rapport',
            'represent': 'repr√©senter',
            'republican': 'r√©publicain',
            'require': 'exiger',
            'research': 'recherche',
            'resource': 'ressource',
            'respond': 'r√©pondre',
            'response': 'r√©ponse',
            'responsibility': 'responsabilit√©',
            'rest': 'repos',
            'result': 'r√©sultat',
            'return': 'retourner',
            'reveal': 'r√©v√©ler',
            'rich': 'riche',
            'right': 'droite',
            'rise': 'monter',
            'risk': 'risque',
            'road': 'route',
            'rock': 'rocher',
            'role': 'r√¥le',
            'room': 'chambre',
            'rule': 'r√®gle',
            'run': 'courir',
            'safe': 's√ªr',
            'same': 'm√™me',
            'save': 'sauver',
            'say': 'dire',
            'scene': 'sc√®ne',
            'school': '√©cole',
            'science': 'science',
            'scientist': 'scientifique',
            'score': 'score',
            'sea': 'mer',
            'season': 'saison',
            'seat': 'si√®ge',
            'second': 'second',
            'section': 'section',
            'security': 's√©curit√©',
            'see': 'voir',
            'seek': 'chercher',
            'seem': 'sembler',
            'sell': 'vendre',
            'send': 'envoyer',
            'senior': 'senior',
            'sense': 'sens',
            'series': 's√©rie',
            'serious': 's√©rieux',
            'serve': 'servir',
            'service': 'service',
            'set': 'ensemble',
            'seven': 'sept',
            'several': 'plusieurs',
            'sex': 'sexe',
            'sexual': 'sexuel',
            'shake': 'secouer',
            'share': 'partager',
            'she': 'elle',
            'shoot': 'tirer',
            'short': 'court',
            'shot': 'coup',
            'should': 'devrait',
            'show': 'montrer',
            'side': 'c√¥t√©',
            'sign': 'signe',
            'significant': 'significatif',
            'similar': 'similaire',
            'simple': 'simple',
            'simply': 'simplement',
            'since': 'depuis',
            'sing': 'chanter',
            'single': 'c√©libataire',
            'sister': 's≈ìur',
            'sit': 's\'asseoir',
            'site': 'site',
            'situation': 'situation',
            'six': 'six',
            'size': 'taille',
            'skill': 'comp√©tence',
            'skin': 'peau',
            'small': 'petit',
            'smile': 'sourire',
            'so': 'donc',
            'social': 'social',
            'society': 'soci√©t√©',
            'soldier': 'soldat',
            'some': 'quelques',
            'somebody': 'quelqu\'un',
            'someone': 'quelqu\'un',
            'something': 'quelque chose',
            'sometimes': 'parfois',
            'son': 'fils',
            'song': 'chanson',
            'soon': 'bient√¥t',
            'sort': 'sorte',
            'sound': 'son',
            'source': 'source',
            'south': 'sud',
            'southern': 'du sud',
            'space': 'espace',
            'speak': 'parler',
            'special': 'sp√©cial',
            'specific': 'sp√©cifique',
            'speech': 'discours',
            'spend': 'd√©penser',
            'sport': 'sport',
            'spring': 'printemps',
            'staff': 'personnel',
            'stage': '√©tape',
            'stand': 'se tenir debout',
            'standard': 'standard',
            'star': '√©toile',
            'start': 'commencer',
            'state': '√©tat',
            'statement': 'd√©claration',
            'station': 'station',
            'stay': 'rester',
            'step': '√©tape',
            'still': 'encore',
            'stock': 'stock',
            'stop': 'arr√™ter',
            'store': 'magasin',
            'story': 'histoire',
            'strategy': 'strat√©gie',
            'street': 'rue',
            'strong': 'fort',
            'structure': 'structure',
            'student': '√©tudiant',
            'study': '√©tude',
            'stuff': 'trucs',
            'style': 'style',
            'subject': 'sujet',
            'success': 'succ√®s',
            'successful': 'r√©ussi',
            'such': 'tel',
            'suddenly': 'soudainement',
            'suffer': 'souffrir',
            'suggest': 'sugg√©rer',
            'summer': '√©t√©',
            'support': 'soutien',
            'sure': 's√ªr',
            'surface': 'surface',
            'system': 'syst√®me',
            'table': 'table',
            'take': 'prendre',
            'talk': 'parler',
            'task': 't√¢che',
            'tax': 'taxe',
            'teach': 'enseigner',
            'teacher': 'professeur',
            'team': '√©quipe',
            'technology': 'technologie',
            'television': 't√©l√©vision',
            'tell': 'dire',
            'ten': 'dix',
            'tend': 'tendre',
            'term': 'terme',
            'test': 'test',
            'than': 'que',
            'thank': 'remercier',
            'that': 'que',
            'the': 'le/la',
            'their': 'leur',
            'them': 'eux',
            'themselves': 'eux-m√™mes',
            'then': 'alors',
            'theory': 'th√©orie',
            'there': 'l√†',
            'these': 'ces',
            'they': 'ils',
            'thing': 'chose',
            'think': 'penser',
            'third': 'troisi√®me',
            'this': 'ce',
            'those': 'ceux',
            'though': 'bien que',
            'thought': 'pens√©e',
            'thousand': 'mille',
            'threat': 'menace',
            'three': 'trois',
            'through': '√† travers',
            'throughout': 'tout au long',
            'throw': 'jeter',
            'thus': 'ainsi',
            'time': 'temps',
            'to': '√†',
            'today': 'aujourd\'hui',
            'together': 'ensemble',
            'tonight': 'ce soir',
            'too': 'aussi',
            'top': 'haut',
            'total': 'total',
            'tough': 'dur',
            'toward': 'vers',
            'town': 'ville',
            'trade': 'commerce',
            'traditional': 'traditionnel',
            'training': 'formation',
            'travel': 'voyage',
            'treat': 'traiter',
            'treatment': 'traitement',
            'tree': 'arbre',
            'trial': 'proc√®s',
            'trip': 'voyage',
            'trouble': 'probl√®me',
            'true': 'vrai',
            'truth': 'v√©rit√©',
            'try': 'essayer',
            'turn': 'tourner',
            'tv': 't√©l√©',
            'two': 'deux',
            'type': 'type',
            'under': 'sous',
            'understand': 'comprendre',
            'unit': 'unit√©',
            'until': 'jusqu\'√†',
            'up': 'en haut',
            'upon': 'sur',
            'us': 'nous',
            'use': 'utiliser',
            'used': 'utilis√©',
            'user': 'utilisateur',
            'usually': 'habituellement',
            'value': 'valeur',
            'various': 'divers',
            'very': 'tr√®s',
            'victim': 'victime',
            'view': 'vue',
            'violence': 'violence',
            'visit': 'visiter',
            'voice': 'voix',
            'vote': 'vote',
            'wait': 'attendre',
            'walk': 'marcher',
            'wall': 'mur',
            'want': 'vouloir',
            'war': 'guerre',
            'watch': 'regarder',
            'water': 'eau',
            'way': 'chemin',
            'we': 'nous',
            'weapon': 'arme',
            'wear': 'porter',
            'week': 'semaine',
            'weight': 'poids',
            'well': 'bien',
            'west': 'ouest',
            'western': 'occidental',
            'what': 'quoi',
            'whatever': 'quoi que',
            'when': 'quand',
            'where': 'o√π',
            'whether': 'si',
            'which': 'lequel',
            'while': 'pendant',
            'white': 'blanc',
            'who': 'qui',
            'whole': 'entier',
            'whom': 'qui',
            'whose': 'dont',
            'why': 'pourquoi',
            'wide': 'large',
            'wife': '√©pouse',
            'will': 'volont√©',
            'win': 'gagner',
            'wind': 'vent',
            'window': 'fen√™tre',
            'wish': 'souhait',
            'with': 'avec',
            'within': 'dans',
            'without': 'sans',
            'woman': 'femme',
            'wonder': 'se demander',
            'word': 'mot',
            'work': 'travail',
            'worker': 'travailleur',
            'world': 'monde',
            'worry': 's\'inqui√©ter',
            'would': 'voudrait',
            'write': '√©crire',
            'writer': '√©crivain',
            'wrong': 'faux',
            'yard': 'cour',
            'yeah': 'ouais',
            'year': 'ann√©e',
            'yes': 'oui',
            'yet': 'encore',
            'you': 'vous',
            'young': 'jeune',
            'your': 'votre',
            'yourself': 'vous-m√™me'
        };

        for (const word of words) {
            const cleanWord = word.trim().toLowerCase();
            if (cleanWord.length === 0) continue;

            try {
                // Utiliser la traduction du dictionnaire ou une traduction g√©n√©rique
                const translation = basicTranslations[cleanWord] || `[${cleanWord}]`;

                // D√©terminer la difficult√© bas√©e sur la longueur et la fr√©quence
                let difficulty = 'beginner';
                if (cleanWord.length > 8 || !basicTranslations[cleanWord]) {
                    difficulty = 'advanced';
                } else if (cleanWord.length > 5) {
                    difficulty = 'intermediate';
                }

                this.db.insertWord({
                    word: cleanWord,
                    translation: translation,
                    pronunciation: null,
                    partOfSpeech: null,
                    definition: null,
                    example: null,
                    exampleTranslation: null,
                    difficulty: difficulty,
                    category: 'general'
                });
                imported++;
            } catch (error) {
                if (error.code === 'SQLITE_CONSTRAINT_UNIQUE') {
                    skipped++;
                } else {
                    console.error(`‚ùå Erreur pour le mot "${cleanWord}":`, error.message);
                }
            }
        }

        console.log(`‚úÖ Migration des 3000 mots termin√©e: ${imported} mots import√©s, ${skipped} mots ignor√©s (doublons)`);
        return { imported, skipped };
    }

    // Migration compl√®te
    async migrateAll() {
        console.log('üöÄ D√©marrage de la migration compl√®te...');

        // R√©initialiser la base
        this.db.reset();

        // Migrer les mots d√©taill√©s d'abord
        const wordsResult = await this.migrateWordsData();

        // Puis migrer les 3000 mots
        const thousandWordsResult = await this.migrate3000Words();

        // Statistiques finales
        const totalWords = this.db.getTotalWordsCount();
        const categories = this.db.getCategories();

        console.log('\nüìä Statistiques de migration:');
        console.log(`   Total de mots en base: ${totalWords}`);
        console.log(`   Mots d√©taill√©s import√©s: ${wordsResult.imported}`);
        console.log(`   Mots de la liste 3000 import√©s: ${thousandWordsResult.imported}`);
        console.log(`   Cat√©gories disponibles: ${categories.length}`);
        console.log(`   Cat√©gories: ${categories.join(', ')}`);

        return {
            totalWords,
            detailedWords: wordsResult.imported,
            basicWords: thousandWordsResult.imported,
            categories: categories.length
        };
    }
}

export default DataMigration;
