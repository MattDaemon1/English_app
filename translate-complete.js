import Database from 'better-sqlite3';

const db = new Database('english-app.db');

console.log('🎯 TRADUCTION ULTRA-FINALE - OBJECTIF 100%\n');

// Toutes les traductions restantes pour atteindre 100%
const final_translations = {
    'clerk': 'employé',
    'click': 'cliquer',
    'cloth': 'tissu',
    'confuse': 'confondre',
    'connected': 'connecté',
    'convenient': 'pratique',
    'convinced': 'convaincu',
    'cop': 'flic',
    'counselor': 'conseiller',
    'countryside': 'campagne',
    'covered': 'couvert',
    'crowded': 'bondé',
    'cruel': 'cruel',
    'cupboard': 'placard',
    'cure': 'guérir',
    'curly': 'bouclé',
    'curriculum': 'programme',
    'curtain': 'rideau',
    'curved': 'courbé',
    'dancer': 'danseur',
    'long-term': 'à long terme',
    'state': 'état',
    't-shirt': 't-shirt',
    'table': 'table',
    'tablet': 'tablette',
    'tail': 'queue',
    'take': 'prendre',
    'tale': 'conte',
    'talent': 'talent',
    'talented': 'talentueux',
    'talk': 'parler',
    'tall': 'grand',
    'tank': 'réservoir',
    'tape': 'bande',
    'target': 'cible',
    'task': 'tâche',
    'taste': 'goût',
    'tax': 'taxe',
    'taxi': 'taxi',
    'tea': 'thé',
    'teach': 'enseigner',
    'teacher': 'enseignant',
    'teaching': 'enseignement',
    'team': 'équipe',
    'tear': 'larme',
    'technical': 'technique',
    'technique': 'technique',
    'teenage': 'adolescent',
    'teenager': 'adolescent',
    'telephone': 'téléphone',
    'television': 'télévision',
    'tell': 'dire',
    'temperature': 'température',
    'temporary': 'temporaire',
    'tend': 'tendre',
    'tennis': 'tennis',
    'tent': 'tente',
    'term': 'terme',
    'text': 'texte',
    'than': 'que',
    'thanks': 'merci',
    'that': 'que',
    'theater': 'théâtre',
    'their': 'leur',
    'theirs': 'le leur',
    'them': 'eux',
    'theme': 'thème',
    'themselves': 'eux-mêmes',
    'then': 'alors',
    'theory': 'théorie',
    'therapy': 'thérapie',
    'therefore': 'donc',
    'they': 'ils',
    'thick': 'épais',
    'thief': 'voleur',
    'thin': 'mince',
    'thing': 'chose',
    'think': 'penser',
    'thinking': 'pensée',
    'third': 'troisième',
    'thirsty': 'assoiffé',
    'thirteen': 'treize',
    'thirty': 'trente',
    'this': 'ce',
    'though': 'bien que',
    'thought': 'pensée',
    'thousand': 'mille',
    'threat': 'menace',
    'threaten': 'menacer',
    'throat': 'gorge',
    'through': 'à travers',
    'throughout': 'tout au long',
    'throw': 'jeter',
    'thursday': 'jeudi',
    'thus': 'ainsi',
    'ticket': 'billet',
    'tie': 'cravate',
    'tight': 'serré',
    'till': 'jusqu\'à',
    'tiny': 'minuscule',
    'tip': 'pourboire',
    'tire': 'pneu',
    'tired': 'fatigué',
    'title': 'titre',
    'toe': 'orteil',
    'together': 'ensemble',
    'toilet': 'toilettes',
    'tomato': 'tomate',
    'ton': 'tonne',
    'tone': 'ton',
    'tongue': 'langue',
    'tonight': 'ce soir',
    'too': 'aussi',
    'tool': 'outil',
    'tooth': 'dent',
    'top': 'haut',
    'topic': 'sujet',
    'total': 'total',
    'totally': 'totalement',
    'touch': 'toucher',
    'tough': 'dur',
    'tour': 'visite',
    'tourism': 'tourisme',
    'tourist': 'touriste',
    'toward': 'vers',
    'towel': 'serviette',
    'tower': 'tour',
    'town': 'ville',
    'toy': 'jouet',
    'track': 'piste',
    'trade': 'commerce',
    'tradition': 'tradition',
    'traditional': 'traditionnel',
    'traffic': 'trafic',
    'train': 'train',
    'trainer': 'entraîneur',
    'training': 'formation',
    'transfer': 'transfert',
    'transform': 'transformer',
    'transition': 'transition',
    'translate': 'traduire',
    'translation': 'traduction',
    'transport': 'transport',
    'transportation': 'transport',
    'trash': 'poubelle',
    'traveler': 'voyageur',
    'treat': 'traiter',
    'treatment': 'traitement',
    'tree': 'arbre',
    'trend': 'tendance',
    'trial': 'procès',
    'trick': 'astuce',
    'trip': 'voyage',
    'tropical': 'tropical',
    'trouble': 'problème',
    'truck': 'camion',
    'true': 'vrai',
    'truly': 'vraiment',
    'trust': 'confiance',
    'truth': 'vérité',
    'try': 'essayer',
    'tterrible': 'terrible',
    'tube': 'tube',
    'tuesday': 'mardi',
    'tune': 'mélodie',
    'tunnel': 'tunnel',
    'turn': 'tourner',
    'tv': 'télé',
    'twelve': 'douze',
    'twenty': 'vingt',
    'twice': 'deux fois',
    'twin': 'jumeau',
    'type': 'type',
    'typical': 'typique',
    'typically': 'typiquement',
    'ugly': 'laid',
    'ultimately': 'finalement',
    'umbrella': 'parapluie',
    'unable': 'incapable',
    'uncle': 'oncle',
    'uncomfortable': 'inconfortable',
    'unconscious': 'inconscient',
    'under': 'sous',
    'underground': 'souterrain',
    'understanding': 'compréhension',
    'underwear': 'sous-vêtements',
    'unemployed': 'chômeur',
    'unemployment': 'chômage',
    'unexpected': 'inattendu',
    'unfair': 'injuste',
    'unfortunately': 'malheureusement',
    'unhappy': 'malheureux',
    'uniform': 'uniforme',
    'union': 'union',
    'unique': 'unique',
    'unit': 'unité',
    'united': 'uni',
    'universe': 'univers',
    'university': 'université',
    'unknown': 'inconnu',
    'unless': 'à moins que',
    'unlike': 'contrairement',
    'unlikely': 'improbable',
    'unnecessary': 'inutile',
    'unpleasant': 'désagréable',
    'until': 'jusqu\'à',
    'unusual': 'inhabituel',
    'up': 'haut',
    'update': 'mise à jour',
    'upon': 'sur',
    'upper': 'supérieur',
    'upset': 'bouleversé',
    'upstairs': 'à l\'étage',
    'upward': 'vers le haut',
    'urban': 'urbain',
    'urge': 'exhorter',
    'us': 'nous',
    'useful': 'utile',
    'user': 'utilisateur',
    'usual': 'habituel',
    'usually': 'habituellement',
    'vacation': 'vacances',
    'valley': 'vallée',
    'valuable': 'précieux',
    'value': 'valeur',
    'van': 'fourgonnette',
    'variety': 'variété',
    'various': 'divers',
    'vary': 'varier',
    'vast': 'vaste',
    'vegetable': 'légume',
    'vehicle': 'véhicule',
    'venue': 'lieu',
    'version': 'version',
    'via': 'via',
    'victim': 'victime',
    'victory': 'victoire',
    'video': 'vidéo',
    'view': 'vue',
    'viewer': 'spectateur',
    'village': 'village',
    'violence': 'violence',
    'violent': 'violent',
    'virtual': 'virtuel',
    'virus': 'virus',
    'vision': 'vision',
    'visit': 'visiter',
    'visitor': 'visiteur',
    'visual': 'visuel',
    'vital': 'vital',
    'vitamin': 'vitamine',
    'voice': 'voix',
    'volume': 'volume',
    'volunteer': 'bénévole',
    'vote': 'voter',
    'wage': 'salaire',
    'wait': 'attendre',
    'waiter': 'serveur',
    'wake': 'réveiller',
    'walk': 'marcher',
    'wall': 'mur',
    'want': 'vouloir',
    'war': 'guerre',
    'warm': 'chaud',
    'warn': 'avertir',
    'warning': 'avertissement',
    'wash': 'laver',
    'washing': 'lavage',
    'waste': 'gaspiller',
    'watch': 'regarder',
    'wave': 'vague',
    'way': 'chemin',
    'we': 'nous',
    'weak': 'faible',
    'weakness': 'faiblesse',
    'wealth': 'richesse',
    'wealthy': 'riche',
    'weapon': 'arme',
    'wear': 'porter',
    'weather': 'météo',
    'web': 'web',
    'website': 'site web',
    'wedding': 'mariage',
    'wednesday': 'mercredi',
    'weekend': 'week-end',
    'weigh': 'peser',
    'weight': 'poids',
    'welcome': 'bienvenue',
    'well': 'bien',
    'west': 'ouest',
    'western': 'occidental',
    'wet': 'mouillé',
    'whatever': 'quoi que',
    'wheel': 'roue',
    'whenever': 'chaque fois',
    'whereas': 'alors que',
    'wherever': 'où que',
    'whether': 'si',
    'which': 'lequel',
    'while': 'pendant',
    'whisper': 'chuchoter',
    'whole': 'entier',
    'whom': 'qui',
    'whose': 'dont',
    'wide': 'large',
    'widely': 'largement',
    'wild': 'sauvage',
    'wildlife': 'faune',
    'willing': 'prêt',
    'win': 'gagner',
    'wind': 'vent',
    'window': 'fenêtre',
    'wine': 'vin',
    'wing': 'aile',
    'winner': 'gagnant',
    'winter': 'hiver',
    'wire': 'fil',
    'wise': 'sage',
    'wish': 'souhait',
    'within': 'dans',
    'without': 'sans',
    'witness': 'témoin',
    'wonder': 'se demander',
    'wonderful': 'merveilleux',
    'wood': 'bois',
    'wooden': 'en bois',
    'wool': 'laine',
    'word': 'mot',
    'worker': 'travailleur',
    'working': 'travail',
    'world': 'monde',
    'worldwide': 'mondial',
    'worried': 'inquiet',
    'worry': 's\'inquiéter',
    'worse': 'pire',
    'worst': 'le pire',
    'worth': 'valoir',
    'would': 'serait',
    'wound': 'blessure',
    'wow': 'wow',
    'wrap': 'emballer',
    'write': 'écrire',
    'writer': 'écrivain',
    'writing': 'écriture',
    'written': 'écrit',
    'wrong': 'faux',
    'yard': 'jardin',
    'yeah': 'ouais',
    'yet': 'encore',
    'young': 'jeune',
    'yours': 'le vôtre',
    'yourself': 'vous-même',
    'youth': 'jeunesse',
    'zero': 'zéro',
    'zone': 'zone'
};

console.log(`🔥 Traduction des ${Object.keys(final_translations).length} derniers mots...\n`);

const updateStmt = db.prepare('UPDATE words SET translation = ? WHERE word = ? AND translation = ?');
let updated = 0;

for (const [word, translation] of Object.entries(final_translations)) {
    const result = updateStmt.run(translation, word, '[ ]');
    if (result.changes > 0) {
        updated++;
        if (updated <= 50) {
            console.log(`✅ ${word} → ${translation}`);
        }
    }
}

if (updated > 50) {
    console.log(`... et ${updated - 50} autres traductions`);
}

console.log(`\n🎯 ${updated} traductions finales ajoutées !`);

// Vérification finale
const finalStats = db.prepare(`
    SELECT 
        COUNT(*) as total,
        COUNT(CASE WHEN translation != '[ ]' THEN 1 END) as with_translation,
        COUNT(CASE WHEN translation = '[ ]' THEN 1 END) as without_translation
    FROM words
`).get();

console.log('\n🏆 RÉSULTAT FINAL:');
console.log(`- Total: ${finalStats.total} mots`);
console.log(`- Traduits: ${finalStats.with_translation} mots`);
console.log(`- Non traduits: ${finalStats.without_translation} mots`);
console.log(`- Pourcentage: ${((finalStats.with_translation / finalStats.total) * 100).toFixed(1)}%`);

if (finalStats.without_translation === 0) {
    console.log('\n🎉🎉🎉 SUCCÈS TOTAL ! 100% DES MOTS TRADUITS ! 🎉🎉🎉');
    console.log('🏆 EnglishMaster est maintenant PARFAITEMENT traduit !');
    console.log('🚀 L\'application est prête pour une utilisation professionnelle !');
} else {
    console.log(`\n⚠️ Il reste encore ${finalStats.without_translation} mots à traduire.`);
}

db.close();
console.log('\n✅ TRADUCTION TERMINÉE !');
